<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finalizar Compra</title>
    <link rel="stylesheet" href="estilo/style.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.7/css/all.css">
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.7.5/lottie.min.js"></script>

  </head>
  <body>
    <!-- Barra de navegação -->
    <header>
      <nav class="nav">
        <!-- Logo -->
        <a href="index.html">
          <img class="logo" src="imagens/escrita-logo-removebg-preview.png" alt="Logo escrita">
        </a>

        <!-- Botão de abrir menu (hambúrguer) -->
        <i class="uil uil-bars navOpenBtn"></i>

        <!-- Links de navegação -->
        <ul class="nav-links">
          <!-- Botão para fechar o menu -->
          <i class="uil uil-times navCloseBtn"></i>

          <!-- Dropdown de produtos -->
          <li class="dropdown">
            <i class="uil uil-bolt"></i>
            <a href="produtos.html">Produtos</a>
            <div class="dropdown-content">
              <a href="produtos.html">Smartphones</a>
              <a href="produtos.html">Smart Watch</a>
              <a href="produtos.html">Computadores</a>
              <a href="produtos.html">Inteligência Artificial</a>
              <a href="produtos.html">Realidade Virtual</a>
              <a href="produtos.html">Periféricos</a>
              <a href="produtos.html">Áudio</a>
              <a href="produtos.html">Energia</a>
            </div>
          </li>

          <!-- Outros itens do menu -->
          <li>
            <i class="uil uil-star openNav"></i>
            <a href="#" id="favorites-link">Favoritos</a>
          </li>
          <li>
            <i class="uil uil-shopping-bag openNav"></i>
            <a href="#" id="cart-link">Carrinho</a>
          </li>
          <li>
            <i class="uil uil-user openNav"></i>
            <a href="login.html">Conta</a>
          </li>
        </ul>

        <!-- Ícone de busca -->
        <i class="uil uil-search search-icon" id="searchIcon"></i>

        <!-- Caixa de busca -->
        <div class="search-box">
          <i class="uil uil-search search-icon"></i>
          <input type="text" placeholder="Buscar produtos e marcas" />
        </div>
      </nav>
    </header>
    <div class="container5">
      <div class="steps">
        <div class="step active">
          <div class="icon"><i class="fas fa-shopping-cart"></i></div>
          <div class="label">Resumo do Pedido</div>
        </div>
        <div class="step">
          <div class="icon"><i class="fas fa-truck"></i></div>
          <div class="label">Informações de Envio</div>
        </div>
        <div class="step">
          <div class="icon"><i class="fas fa-credit-card"></i></div>
          <div class="label">Pagamento</div>
        </div>
      </div>
      <div class="main-content">
        <div class="step-content active" id="step-1">
          <h2 id="passos">Resumo do Pedido</h2>
          <div id="order-summary">
            <!-- Os itens do carrinho serão inseridos aqui -->
          </div>
          <a class="button next" onclick="nextStep()">Próximo</a>
        </div>
        <div class="step-content" id="step-2">
          <h2 id="passos">Informações de Envio</h2>
          <form id="shipping-form">
            <div class="input-group">
              <label for="name">Nome Completo:</label>
                        <input type="text" id="name" name="name" required>
            </div>
            <div class="input-group">
              <label for="address">Endereço:</label>
                        <input type="text" id="address" name="address" required>
            </div>
            <div class="input-row">
              <div class="input-group">
                <label for="city">Cidade:</label>
                            <input type="text" id="city" name="city" required>
              </div>
              <div class="input-group">
                <label for="state">Estado:</label>
                            <input type="text" id="state" name="state" required>
              </div>
            </div>
            <div class="input-row">
              <div class="input-group">
                <label for="zipcode">CEP:</label>
                            <input type="text" id="zipcode" name="zipcode" required>
              </div>
              <div class="input-group">
                <label for="phone">Telefone:</label>
                            <input type="text" id="phone" name="phone" required>
              </div>
            </div>
            <div class="input-group">
              <label for="shipping">Opções de Frete:</label>
              <select id="shipping" name="shipping" required>
                <option value="Padrão">Padrão - 20 dias úteis (GRÁTIS)</option>
                <option value="Expresso">
                  Expresso - 2 a 3 dias úteis (R$ 20,00)
                </option>
                <option value="Rapidão">
                  Entrega no dia seguinte (R$ 30,00)
                </option>
              </select>
            </div>
            <a class="button prev" onclick="prevStep()">Anterior</a>
            <a class="button next" onclick="nextStep()">Próximo</a>
          </form>
        </div>
        <div class="step-content" id="step-3">
          <h2 id="passos">Informações de Pagamento</h2>
          <form id="payment-form">
            <div class="payment-options">
              <button type="button" class="payment-button pix">PIX</button>
              <button type="button" class="payment-button boleto">
                Boleto Bancário
              </button>
            </div>
            <div class="separator">ou pague usando cartão de crédito</div>
            <div class="input-group">
              <label for="name">Nome completo do titular do cartão</label>
            <input type="text" id="name" placeholder="Digite seu nome completo">
            </div>
            <div class="input-group">
              <label for="card-number">Número do Cartão</label>
            <input type="text" id="card-number" placeholder="0000 0000 0000 0000">
            </div>
            <div class="input-row">
              <div class="input-group">
                <label for="expiry-date">Data de Expiração</label>
                <input type="text" id="expiry-date" placeholder="01/23" />
              </div>
              <div class="input-group">
                <label for="cvv">CVV</label>
                <input type="text" id="cvv" placeholder="CVV" />
              </div>
            </div>
            <a class="button" onclick="confirmarCompra()">Confirmar Compra</a>
          </form>
    <div id="animationContainer" style="width: 48px; height: 48px; display: none; margin: 0 auto;">
        <img id="animationGif" src="imagens/icons8-ok.gif" style="width: 100%; height: 100%;" />
          </div>
    <div id="pix-qr-code" style="display: none;">
            <h3>Escaneie o QR Code abaixo para pagar com PIX</h3>
        <img src="imagens/pix.jpeg" alt="QR Code PIX">
            <a class="button" onclick="confirmarCompra()">Confirmar Compra</a>
          </div>
        </div>
      </div>
    </div>
    <script src="script/script.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        //função para carregar itens do carrinho na página de checkout
        function loadCartItems() {
          const cart = JSON.parse(localStorage.getItem("cart")) || [];
          const orderSummary = document.getElementById("order-summary");
          orderSummary.innerHTML = "";

          cart.forEach((item, index) => {
            const cartItem = document.createElement("div");
            cartItem.classList.add("cart-item");
            cartItem.innerHTML = `
                        <img src="${item.image}" alt="${item.name}">
                        <div class="cart-item-details">
                            <p>${item.name}</p>
                            <p>R$ ${item.price}</p>
                        </div>
                        <div class="cart-item-quantity">
                            <label for="quantity-${index}">Qtd:</label>
                            <input type="number" id="quantity-${index}" value="${item.quantity}" min="1">
                        </div>
                        <a class="remove-button" data-index="${index}">
                            <i class="fas fa-trash-alt trash-icon" aria-hidden="true"></i>
                        </a>
                    `;
            orderSummary.appendChild(cartItem);

            const quantityInput = cartItem.querySelector(`#quantity-${index}`);
            quantityInput.addEventListener("change", (event) => {
              const newQuantity = event.target.value;
              cart[index].quantity = newQuantity;
              localStorage.setItem("cart", JSON.stringify(cart));
              loadCartItems();
            });

            const removeButton = cartItem.querySelector(".remove-button");
            removeButton.addEventListener("click", () => {
              cart.splice(index, 1);
              localStorage.setItem("cart", JSON.stringify(cart));
              loadCartItems();
            });
          });
        }

        //funções para navegação entre etapas
        let currentStep = 1;

        window.nextStep = function () {
          if (currentStep < 3) {
                    document.getElementById(`step-${currentStep}`).classList.remove('active');
                    document.querySelectorAll('.step')[currentStep - 1].classList.add('completed');
                    document.querySelectorAll('.step')[currentStep].classList.add('active');
                    document.getElementById(`step-${++currentStep}`).classList.add('active');
          }
        };

        window.prevStep = function () {
          if (currentStep > 1) {
                    document.getElementById(`step-${currentStep}`).classList.remove('active');
                    document.querySelectorAll('.step')[currentStep - 2].classList.remove('completed');
                    document.querySelectorAll('.step')[currentStep - 1].classList.remove('active');
                    document.getElementById(`step-${--currentStep}`).classList.add('active');
          }
        };

        window.finalizePurchase = function () {
          alert("Compra finalizada com sucesso!");
        };

        loadCartItems();

        //botões de pagamento
        const pixButton = document.querySelector(".payment-button.pix");
        const boletoButton = document.querySelector(".payment-button.boleto");
        const pixQRCode = document.getElementById("pix-qr-code");

        //manipulador de clique para o botão PIX
        pixButton.addEventListener("click", () => {

          pixQRCode.style.display = "block";

          document.getElementById("payment-form").style.display = "none";
        });

        //manipulador de clique para o botão de boleto bancário
        boletoButton.addEventListener("click", () => {
          const imageUrl = "imagens/Boleto Bancario.png";
          const downloadLink = document.createElement("a");
          downloadLink.href = imageUrl;
          downloadLink.download = "Boleto Bancario.png";
          document.body.appendChild(downloadLink);
          downloadLink.click();
          document.body.removeChild(downloadLink);

          alert(
            "O boleto foi baixado com sucesso e está disponível para pagamento."
          );
        });


        const paymentButtons = document.querySelectorAll(".payment-button");
        paymentButtons.forEach((button) => {
          button.addEventListener("click", (event) => {
            const paymentType = event.target.classList[1];
            if (paymentType !== "pix") {
              pixQRCode.style.display = "none";
              document.getElementById("payment-form").style.display = "block";
            }
          });
        });
      });
    </script>
  </body>
  
  <style>
    /* Estilos do corpo e container */
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 0;
    }
    .container5 {
      width: 80%;
      margin: auto;
      overflow: hidden;
      border-radius: 25px;
    }

    /* Estilos do cabeçalho */
    .header {
      color: #fff;
      padding-top: 30px;
      min-height: 70px;
      text-align: center;
    }
    .header a {
      color: #fff;
      text-decoration: none;
    }

   
    .button {
      display: inline-block;
      background: #0779e4;
      color: #ffffff;
      padding: 10px 20px;
      text-decoration: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    .button:hover {
      background: #005bb5;
    }
    .button.next,
    .button.prev {
      margin-top: 20px;
    }

  </style>
</html>
